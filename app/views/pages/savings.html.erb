<div class="container">
  <div class="savings-content">
    <div class="progress-content">
      <h3>Savings Progress</h3>
      <div class="progress-content-graph">
        <%= line_chart [
          {name: "Savings Account", data: @savings_data},
          {name: "Current Account", data: @current_data},
          {name: "Securities Account", data: @securities_data}],
          id: "progress-graph",
          height: "310px",
          colors: ["rgb(55, 93, 79)", "rgb(90, 90, 90)"],
          legend: "bottom",
          curve: true
          %>
      </div>
      <div class="progress-content-stats">
        <div class="progress-content-stats-child">
          <h5>Average Weekly Saving</h5>
          <p>£<%= @average_weekly_saving %></p>
        </div>
        <div id="balance-hover">
          <h5 id="alpha">Total Balance</h5>
          <p id="bravo">£<%= number_with_delimiter(@total_balance, :delimiter => ',') %></p>
          <p id="charlie"><strong>Savings:</strong> £<%= number_with_delimiter(@savings_balance.to_i, :delimiter => ',') %></p>
          <p id="delta"><strong>Current:</strong> £<%= number_with_delimiter(@checking_balance.to_i, :delimiter => ',') %></p>
          <p id="echo"><strong>Securities:</strong> £<%= number_with_delimiter(@securities_balance.to_i, :delimiter => ',') %></p>
        </div>
      </div>
    </div>
    <div class="projection-content">
      <h3>Projected Retirement Fund</h3>
      <div class="progress-content-graph">
        <%= area_chart @projection_data,
          id: "retirement-graph",
          height: "310px",
          colors: ["rgb(55, 93, 79)", "rgb(90, 90, 90)"],
          legend: "bottom",
          curve: true,
          xtype: "number",
          ytype: "number",
          min: "0",
          max: "5000000"
          %>
      </div>
      <div class="progress-content-stats">
        <div class="progress-content-stats-child">
          <h5>Projected Retirement Fund</h5>
          <p>£<%= number_with_delimiter(@projection_data.last.last.to_i, :delimiter => ',') %></p>
        </div>
        <div class="progress-content-stats-child">
          <h5>Estimated Annuity Value</h5>
          <p>£<%= number_with_delimiter((@projection_data.last.last * 0.047).to_i, :delimiter => ',') %></p>
        </div>
      </div>
      <div class="progress-content-stats">
        <div class="progress-content-stats-child">
          <h5>Expected Return</h5>
          <p><%= params[:interest_rate] %>%</p>
        </div>
        <div class="progress-content-stats-child">
          <h5>Expected Volatility</h5>
          <p><%= @volatility %>%</p>
        </div>
      </div>
      <%= form_tag svg_path, method: :get do %>
        <h5>Portfolio Risk</h5>
        <div class="slider-holder">
          <div class="slider-bar">
            <input id="return-slider" name="interest_rate" type="range" min="2" max="7" value="<%= params[:interest_rate] %>">
          </div>
        </div>
        <p id="return-comment"></p>
        <h5>Weekly Saving Rate</h5>
        <div class="slider-holder">
          <div class="slider-bar">
            <input id="savings-slider" name="weekly_saving" type="range" min="0" max="500" value="<%= params[:weekly_saving] %>">
          </div>
          <div class="slider-value">
            <p id="savings-value">£<%= params[:weekly_saving] %></p>
          </div>
        </div>
        <p id="savings-comment"></p>
        <%= submit_tag "show me the money!", class: "btn btn-danger", id: "projection-btn" %>
      <% end %>
  </div>
</div>

<%= javascript_pack_tag 'savings-slider' %>
